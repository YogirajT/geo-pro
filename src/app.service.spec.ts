import { Test, TestingModule } from '@nestjs/testing';
import { AppService } from './app.service';
import { OpenStreetMapService } from './open-street-map/open-street-map.service';

const osm_mock = {
  version: '0.6',
  generator: 'CGImap 0.8.8 (3930547 spike-08.openstreetmap.org)',
  copyright: 'OpenStreetMap and contributors',
  attribution: 'http://www.openstreetmap.org/copyright',
  license: 'http://opendatacommons.org/licenses/odbl/1-0/',
  bounds: {
    minlat: 51.48007,
    minlon: -0.15461,
    maxlat: 51.48057,
    maxlon: -0.15451,
  },
  elements: [
    {
      type: 'node',
      id: 25863680,
      lat: 51.4810409,
      lon: -0.1535776,
      timestamp: '2007-02-12T13:41:10Z',
      version: 1,
      changeset: 214803,
      user: 'Welshie',
      uid: 508,
    },
    {
      type: 'node',
      id: 282113577,
      lat: 51.4804724,
      lon: -0.1544694,
      timestamp: '2008-07-30T00:26:45Z',
      version: 1,
      changeset: 625907,
      user: 'Fidgit',
      uid: 53261,
    },
    {
      type: 'node',
      id: 282113579,
      lat: 51.4802693,
      lon: -0.154684,
      timestamp: '2008-07-30T00:26:45Z',
      version: 1,
      changeset: 625907,
      user: 'Fidgit',
      uid: 53261,
    },
    {
      type: 'node',
      id: 282113580,
      lat: 51.4801784,
      lon: -0.154684,
      timestamp: '2008-07-30T00:26:45Z',
      version: 1,
      changeset: 625907,
      user: 'Fidgit',
      uid: 53261,
    },
    {
      type: 'node',
      id: 282113581,
      lat: 51.4800769,
      lon: -0.1547011,
      timestamp: '2008-07-30T00:31:52Z',
      version: 2,
      changeset: 625907,
      user: 'Fidgit',
      uid: 53261,
    },
    {
      type: 'node',
      id: 282114622,
      lat: 51.4809382,
      lon: -0.153747,
      timestamp: '2020-08-24T08:32:12Z',
      version: 3,
      changeset: 89843277,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 282114623,
      lat: 51.4808252,
      lon: -0.1539716,
      timestamp: '2008-07-30T00:31:52Z',
      version: 1,
      changeset: 625907,
      user: 'Fidgit',
      uid: 53261,
    },
    {
      type: 'node',
      id: 282114624,
      lat: 51.4806381,
      lon: -0.1542462,
      timestamp: '2008-07-30T00:31:52Z',
      version: 1,
      changeset: 625907,
      user: 'Fidgit',
      uid: 53261,
    },
    {
      type: 'node',
      id: 282114625,
      lat: 51.4803709,
      lon: -0.1546067,
      timestamp: '2008-07-30T00:31:52Z',
      version: 1,
      changeset: 625907,
      user: 'Fidgit',
      uid: 53261,
    },
    {
      type: 'node',
      id: 282114626,
      lat: 51.4800161,
      lon: -0.1546744,
      timestamp: '2008-07-30T00:31:52Z',
      version: 1,
      changeset: 625907,
      user: 'Fidgit',
      uid: 53261,
    },
    {
      type: 'node',
      id: 759857557,
      lat: 51.4828663,
      lon: -0.1519095,
      timestamp: '2010-05-30T20:34:08Z',
      version: 2,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759857560,
      lat: 51.4826731,
      lon: -0.1522268,
      timestamp: '2010-05-30T20:34:08Z',
      version: 2,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759857579,
      lat: 51.4822931,
      lon: -0.1525174,
      timestamp: '2010-05-30T20:34:08Z',
      version: 2,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759857604,
      lat: 51.4824298,
      lon: -0.152401,
      timestamp: '2010-05-30T20:34:11Z',
      version: 2,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759857616,
      lat: 51.481941,
      lon: -0.1526296,
      timestamp: '2010-05-30T19:10:45Z',
      version: 1,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759857634,
      lat: 51.482819,
      lon: -0.1519173,
      timestamp: '2010-05-30T20:34:12Z',
      version: 2,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759857658,
      lat: 51.4820616,
      lon: -0.1525917,
      timestamp: '2010-05-30T19:10:46Z',
      version: 1,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759857672,
      lat: 51.4812713,
      lon: -0.1531372,
      timestamp: '2010-05-30T19:10:46Z',
      version: 1,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759857683,
      lat: 51.4827693,
      lon: -0.1520096,
      timestamp: '2010-05-30T20:34:08Z',
      version: 2,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759857696,
      lat: 51.4813722,
      lon: -0.1530515,
      timestamp: '2017-12-07T14:09:56Z',
      version: 2,
      changeset: 54432747,
      user: 'peregrination',
      uid: 486343,
    },
    {
      type: 'node',
      id: 759857755,
      lat: 51.4825463,
      lon: -0.1523269,
      timestamp: '2010-05-30T20:34:08Z',
      version: 2,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759857757,
      lat: 51.4815508,
      lon: -0.1529394,
      timestamp: '2017-12-07T14:09:56Z',
      version: 3,
      changeset: 54432747,
      user: 'peregrination',
      uid: 486343,
    },
    {
      type: 'node',
      id: 759857762,
      lat: 51.4811257,
      lon: -0.1534021,
      timestamp: '2010-05-30T19:10:48Z',
      version: 1,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759950843,
      lat: 51.4830633,
      lon: -0.1525125,
      timestamp: '2015-03-20T08:58:07Z',
      version: 2,
      changeset: 29609289,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 759950849,
      lat: 51.4829132,
      lon: -0.1520119,
      timestamp: '2010-05-30T20:34:07Z',
      version: 1,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 759950855,
      lat: 51.4829755,
      lon: -0.1522685,
      timestamp: '2010-05-30T20:34:07Z',
      version: 1,
      changeset: 4855976,
      user: 'marl',
      uid: 87367,
    },
    {
      type: 'node',
      id: 842087889,
      lat: 51.4807925,
      lon: -0.1536923,
      timestamp: '2020-08-24T08:32:12Z',
      version: 2,
      changeset: 89843277,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678495,
      lat: 51.4789577,
      lon: -0.1572735,
      timestamp: '2020-09-26T17:04:44Z',
      version: 2,
      changeset: 91558596,
      user: 'mt_CSC',
      uid: 11042548,
    },
    {
      type: 'node',
      id: 3379678604,
      lat: 51.4789679,
      lon: -0.1579676,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678605,
      lat: 51.4787932,
      lon: -0.1579188,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678606,
      lat: 51.4788185,
      lon: -0.1577358,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678607,
      lat: 51.4789223,
      lon: -0.1575976,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678608,
      lat: 51.4789552,
      lon: -0.1572968,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678609,
      lat: 51.4789653,
      lon: -0.1572032,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678610,
      lat: 51.4789122,
      lon: -0.1571423,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678611,
      lat: 51.478897,
      lon: -0.1570813,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678612,
      lat: 51.4789248,
      lon: -0.1570325,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678613,
      lat: 51.4790995,
      lon: -0.1570488,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678614,
      lat: 51.4791223,
      lon: -0.1570488,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678615,
      lat: 51.4793046,
      lon: -0.1568089,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678616,
      lat: 51.4793401,
      lon: -0.1567926,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678617,
      lat: 51.4793755,
      lon: -0.1568455,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678618,
      lat: 51.4793907,
      lon: -0.1568943,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678619,
      lat: 51.4794768,
      lon: -0.1569105,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678620,
      lat: 51.4795097,
      lon: -0.156817,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678621,
      lat: 51.4794743,
      lon: -0.1567195,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678622,
      lat: 51.4793983,
      lon: -0.1566381,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678623,
      lat: 51.4792894,
      lon: -0.1563251,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678624,
      lat: 51.4793122,
      lon: -0.1561096,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678625,
      lat: 51.4793907,
      lon: -0.156008,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678626,
      lat: 51.4793755,
      lon: -0.155886,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678627,
      lat: 51.4794616,
      lon: -0.1559186,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678628,
      lat: 51.4795755,
      lon: -0.1557559,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678629,
      lat: 51.4796439,
      lon: -0.1555933,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678630,
      lat: 51.4796591,
      lon: -0.155386,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678631,
      lat: 51.4795527,
      lon: -0.1552112,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678632,
      lat: 51.4793983,
      lon: -0.1550526,
      timestamp: '2015-03-02T15:25:23Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678633,
      lat: 51.4793451,
      lon: -0.1549185,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678634,
      lat: 51.4795502,
      lon: -0.1547274,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678635,
      lat: 51.479654,
      lon: -0.1548209,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678636,
      lat: 51.4797654,
      lon: -0.154768,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678637,
      lat: 51.4797857,
      lon: -0.1544916,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678638,
      lat: 51.4799528,
      lon: -0.1542273,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678639,
      lat: 51.4800363,
      lon: -0.1538411,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678640,
      lat: 51.48013,
      lon: -0.1538452,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678641,
      lat: 51.4801629,
      lon: -0.1537029,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678642,
      lat: 51.4800566,
      lon: -0.1535768,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678643,
      lat: 51.4799756,
      lon: -0.1532719,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678644,
      lat: 51.4800541,
      lon: -0.1527556,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678645,
      lat: 51.4799933,
      lon: -0.1526133,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678646,
      lat: 51.4800212,
      lon: -0.1523572,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678647,
      lat: 51.4799579,
      lon: -0.1520482,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678648,
      lat: 51.4800237,
      lon: -0.1518653,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678649,
      lat: 51.4800794,
      lon: -0.151849,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678650,
      lat: 51.4801731,
      lon: -0.1522149,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678651,
      lat: 51.4802743,
      lon: -0.1525239,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678652,
      lat: 51.4801705,
      lon: -0.1527597,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678653,
      lat: 51.480287,
      lon: -0.1530687,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678654,
      lat: 51.4804111,
      lon: -0.1532313,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678655,
      lat: 51.4804845,
      lon: -0.1530239,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678656,
      lat: 51.480687,
      lon: -0.1533045,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678657,
      lat: 51.4809478,
      lon: -0.1536256,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678658,
      lat: 51.4808035,
      lon: -0.1539224,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678659,
      lat: 51.4806389,
      lon: -0.1538614,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678660,
      lat: 51.4806769,
      lon: -0.1537029,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678661,
      lat: 51.4806975,
      lon: -0.1535001,
      timestamp: '2022-08-27T16:40:29Z',
      version: 2,
      changeset: 125449461,
      user: 'WENK',
      uid: 26174,
    },
    {
      type: 'node',
      id: 3379678662,
      lat: 51.4805127,
      lon: -0.153376,
      timestamp: '2022-08-27T16:40:29Z',
      version: 2,
      changeset: 125449461,
      user: 'WENK',
      uid: 26174,
    },
    {
      type: 'node',
      id: 3379678663,
      lat: 51.4803883,
      lon: -0.153398,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678664,
      lat: 51.4803832,
      lon: -0.1536175,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678665,
      lat: 51.4803022,
      lon: -0.1538086,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678666,
      lat: 51.4803706,
      lon: -0.1539509,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678667,
      lat: 51.4805225,
      lon: -0.1540484,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678668,
      lat: 51.480606,
      lon: -0.1539997,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678669,
      lat: 51.480687,
      lon: -0.1541013,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678670,
      lat: 51.4805275,
      lon: -0.1545729,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678671,
      lat: 51.4803933,
      lon: -0.1550973,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678672,
      lat: 51.4802516,
      lon: -0.1554185,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678673,
      lat: 51.4800921,
      lon: -0.1558413,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678674,
      lat: 51.479887,
      lon: -0.1567886,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678675,
      lat: 51.4798692,
      lon: -0.1570284,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678676,
      lat: 51.4799148,
      lon: -0.1573008,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678677,
      lat: 51.4797705,
      lon: -0.1574878,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678678,
      lat: 51.4796591,
      lon: -0.1576952,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678679,
      lat: 51.4796034,
      lon: -0.1578375,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678680,
      lat: 51.4794793,
      lon: -0.1576789,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678681,
      lat: 51.4793021,
      lon: -0.1575529,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678682,
      lat: 51.4791173,
      lon: -0.1575935,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3379678683,
      lat: 51.4790362,
      lon: -0.157748,
      timestamp: '2015-03-02T15:25:24Z',
      version: 1,
      changeset: 29201620,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3395875658,
      lat: 51.4806844,
      lon: -0.1541782,
      timestamp: '2015-03-12T19:55:55Z',
      version: 1,
      changeset: 29434059,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3502972852,
      lat: 51.4811999,
      lon: -0.1532671,
      timestamp: '2015-05-07T13:59:27Z',
      version: 1,
      changeset: 30874488,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 3502976287,
      lat: 51.4812952,
      lon: -0.1531127,
      timestamp: '2015-05-07T14:05:16Z',
      version: 1,
      changeset: 30874656,
      user: 'ecatmur',
      uid: 352985,
    },
    {
      type: 'node',
      id: 9981641678,
      lat: 51.4807763,
      lon: -0.1536064,
      timestamp: '2022-08-27T16:25:54Z',
      version: 2,
      changeset: 125448876,
      user: 'WENK',
      uid: 26174,
      tags: {
        historic: 'memorial',
        inscription:
          'This remembrance stone and the Australian Memorial Garden and House are dedicated to the memory of the 5397 Australian Air Crew lost in action over Europe during the Second World War 1939-1945\n\nUnveiled by Group Captain Roxley McLennan, Air Force Adviser',
        material: 'stone',
        memorial: 'stone',
        name: 'Australian Royal Air Force Remembrance Stone',
      },
    },
    {
      type: 'node',
      id: 9981801488,
      lat: 51.4807912,
      lon: -0.1535278,
      timestamp: '2022-08-27T16:40:29Z',
      version: 1,
      changeset: 125449461,
      user: 'WENK',
      uid: 26174,
    },
    {
      type: 'node',
      id: 9981801489,
      lat: 51.4807527,
      lon: -0.1534871,
      timestamp: '2022-08-27T16:40:29Z',
      version: 1,
      changeset: 125449461,
      user: 'WENK',
      uid: 26174,
    },
    {
      type: 'node',
      id: 9981801490,
      lat: 51.4805959,
      lon: -0.1535561,
      timestamp: '2022-08-27T16:40:29Z',
      version: 1,
      changeset: 125449461,
      user: 'WENK',
      uid: 26174,
    },
    {
      type: 'node',
      id: 9981801491,
      lat: 51.4805335,
      lon: -0.1534634,
      timestamp: '2022-08-27T16:40:29Z',
      version: 1,
      changeset: 125449461,
      user: 'WENK',
      uid: 26174,
    },
    {
      type: 'way',
      id: 25863795,
      timestamp: '2019-07-06T15:08:07Z',
      version: 10,
      changeset: 71961613,
      user: 'Martin Constantino–Bodin',
      uid: 10079690,
      nodes: [
        759950843, 759950855, 759950849, 759857557, 759857634, 759857683,
        759857560, 759857755, 759857604, 759857579, 759857658, 759857616,
        759857757, 759857696, 3502976287, 759857672, 3502972852, 759857762,
        25863680, 282114622, 282114623, 3395875658, 282114624, 282113577,
        282114625, 282113579, 282113580, 282113581, 282114626,
      ],
      tags: { foot: 'yes', highway: 'footway', lit: 'no', surface: 'asphalt' },
    },
    {
      type: 'way',
      id: 330933156,
      timestamp: '2022-08-27T16:40:29Z',
      version: 5,
      changeset: 125449461,
      user: 'WENK',
      uid: 26174,
      nodes: [
        3379678604, 3379678605, 3379678606, 3379678607, 3379678608, 3379678495,
        3379678609, 3379678610, 3379678611, 3379678612, 3379678613, 3379678614,
        3379678615, 3379678616, 3379678617, 3379678618, 3379678619, 3379678620,
        3379678621, 3379678622, 3379678623, 3379678624, 3379678625, 3379678626,
        3379678627, 3379678628, 3379678629, 3379678630, 3379678631, 3379678632,
        3379678633, 3379678634, 3379678635, 3379678636, 3379678637, 3379678638,
        3379678639, 3379678640, 3379678641, 3379678642, 3379678643, 3379678644,
        3379678645, 3379678646, 3379678647, 3379678648, 3379678649, 3379678650,
        3379678651, 3379678652, 3379678653, 3379678654, 3379678655, 3379678656,
        3379678657, 3379678658, 3379678659, 3379678660, 842087889, 9981641678,
        9981801488, 9981801489, 3379678661, 9981801490, 9981801491, 3379678662,
        3379678663, 3379678664, 3379678665, 3379678666, 3379678667, 3379678668,
        3379678669, 3379678670, 3379678671, 3379678672, 3379678673, 3379678674,
        3379678675, 3379678676, 3379678677, 3379678678, 3379678679, 3379678680,
        3379678681, 3379678682, 3379678683, 3379678604,
      ],
      tags: { natural: 'wood' },
    },
  ],
};

describe('OpenStreetMapService', () => {
  let service: AppService;

  beforeEach(async () => {
    const module: TestingModule = await Test.createTestingModule({
      providers: [
        AppService,
        {
          provide: OpenStreetMapService,
          useValue: {
            findMapFeatures: jest.fn(() => Promise.resolve(osm_mock)),
          },
        },
      ],
    }).compile();

    service = module.get<AppService>(AppService);
  });

  it('should be defined', () => {
    expect(service).toBeDefined();
  });

  describe('getGeoFeatures', () => {
    it('should return a valid response', async () => {
      const featureRequest = {
        minLat: -0.15461,
        maxLat: -0.15055,
        minLong: 51.48007,
        maxLong: 51.48159,
      };
      const response = await service.getGeoFeatures(featureRequest);
      expect(JSON.stringify(response)).toEqual(
        '{"type":"FeatureCollection","features":[{"type":"Feature","id":"way/330933156","properties":{"timestamp":"2022-08-27T16:40:29Z","version":5,"changeset":125449461,"user":"WENK","uid":26174,"natural":"wood","id":"way/330933156"},"geometry":{"type":"Polygon","coordinates":[[[-0.1579676,51.4789679],[-0.1579188,51.4787932],[-0.1577358,51.4788185],[-0.1575976,51.4789223],[-0.1572968,51.4789552],[-0.1572735,51.4789577],[-0.1572032,51.4789653],[-0.1571423,51.4789122],[-0.1570813,51.478897],[-0.1570325,51.4789248],[-0.1570488,51.4790995],[-0.1570488,51.4791223],[-0.1568089,51.4793046],[-0.1567926,51.4793401],[-0.1568455,51.4793755],[-0.1568943,51.4793907],[-0.1569105,51.4794768],[-0.156817,51.4795097],[-0.1567195,51.4794743],[-0.1566381,51.4793983],[-0.1563251,51.4792894],[-0.1561096,51.4793122],[-0.156008,51.4793907],[-0.155886,51.4793755],[-0.1559186,51.4794616],[-0.1557559,51.4795755],[-0.1555933,51.4796439],[-0.155386,51.4796591],[-0.1552112,51.4795527],[-0.1550526,51.4793983],[-0.1549185,51.4793451],[-0.1547274,51.4795502],[-0.1548209,51.479654],[-0.154768,51.4797654],[-0.1544916,51.4797857],[-0.1542273,51.4799528],[-0.1538411,51.4800363],[-0.1538452,51.48013],[-0.1537029,51.4801629],[-0.1535768,51.4800566],[-0.1532719,51.4799756],[-0.1527556,51.4800541],[-0.1526133,51.4799933],[-0.1523572,51.4800212],[-0.1520482,51.4799579],[-0.1518653,51.4800237],[-0.151849,51.4800794],[-0.1522149,51.4801731],[-0.1525239,51.4802743],[-0.1527597,51.4801705],[-0.1530687,51.480287],[-0.1532313,51.4804111],[-0.1530239,51.4804845],[-0.1533045,51.480687],[-0.1536256,51.4809478],[-0.1539224,51.4808035],[-0.1538614,51.4806389],[-0.1537029,51.4806769],[-0.1536923,51.4807925],[-0.1536064,51.4807763],[-0.1535278,51.4807912],[-0.1534871,51.4807527],[-0.1535001,51.4806975],[-0.1535561,51.4805959],[-0.1534634,51.4805335],[-0.153376,51.4805127],[-0.153398,51.4803883],[-0.1536175,51.4803832],[-0.1538086,51.4803022],[-0.1539509,51.4803706],[-0.1540484,51.4805225],[-0.1539997,51.480606],[-0.1541013,51.480687],[-0.1545729,51.4805275],[-0.1550973,51.4803933],[-0.1554185,51.4802516],[-0.1558413,51.4800921],[-0.1567886,51.479887],[-0.1570284,51.4798692],[-0.1573008,51.4799148],[-0.1574878,51.4797705],[-0.1576952,51.4796591],[-0.1578375,51.4796034],[-0.1576789,51.4794793],[-0.1575529,51.4793021],[-0.1575935,51.4791173],[-0.157748,51.4790362],[-0.1579676,51.4789679]]]}},{"type":"Feature","id":"way/25863795","properties":{"timestamp":"2019-07-06T15:08:07Z","version":10,"changeset":71961613,"user":"Martin Constantino–Bodin","uid":10079690,"foot":"yes","highway":"footway","lit":"no","surface":"asphalt","id":"way/25863795"},"geometry":{"type":"LineString","coordinates":[[-0.1525125,51.4830633],[-0.1522685,51.4829755],[-0.1520119,51.4829132],[-0.1519095,51.4828663],[-0.1519173,51.482819],[-0.1520096,51.4827693],[-0.1522268,51.4826731],[-0.1523269,51.4825463],[-0.152401,51.4824298],[-0.1525174,51.4822931],[-0.1525917,51.4820616],[-0.1526296,51.481941],[-0.1529394,51.4815508],[-0.1530515,51.4813722],[-0.1531127,51.4812952],[-0.1531372,51.4812713],[-0.1532671,51.4811999],[-0.1534021,51.4811257],[-0.1535776,51.4810409],[-0.153747,51.4809382],[-0.1539716,51.4808252],[-0.1541782,51.4806844],[-0.1542462,51.4806381],[-0.1544694,51.4804724],[-0.1546067,51.4803709],[-0.154684,51.4802693],[-0.154684,51.4801784],[-0.1547011,51.4800769],[-0.1546744,51.4800161]]}},{"type":"Feature","id":"node/9981641678","properties":{"timestamp":"2022-08-27T16:25:54Z","version":2,"changeset":125448876,"user":"WENK","uid":26174,"historic":"memorial","inscription":"This remembrance stone and the Australian Memorial Garden and House are dedicated to the memory of the 5397 Australian Air Crew lost in action over Europe during the Second World War 1939-1945\\n\\nUnveiled by Group Captain Roxley McLennan, Air Force Adviser","material":"stone","memorial":"stone","name":"Australian Royal Air Force Remembrance Stone","id":"node/9981641678"},"geometry":{"type":"Point","coordinates":[-0.1536064,51.4807763]}}]}',
      );
    });
  });
});
